{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\sdeshpande\\\\Documents\\\\FluidExamples\\\\angular-demo\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\n\n/*!\n * Copyright (c) Microsoft Corporation and contributors. All rights reserved.\n * Licensed under the MIT License.\n */\nimport { convertSummaryTreeToWholeSummaryTree } from \"./storageUtils\";\n/**\n * Converts summary to snapshot tree and uploads with single snaphot tree payload.\n */\n\nexport class WholeSummaryUploadManager {\n  constructor(manager) {\n    this.manager = manager;\n  }\n\n  writeSummaryTree(summaryTree, parentHandle, summaryType, sequenceNumber) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const id = yield _this.writeSummaryTreeCore(parentHandle, summaryTree, summaryType, sequenceNumber !== null && sequenceNumber !== void 0 ? sequenceNumber : 0);\n\n      if (!id) {\n        throw new Error(`Failed to write summary tree`);\n      }\n\n      return id;\n    })();\n  }\n\n  writeSummaryTreeCore(parentHandle, tree, type, sequenceNumber) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const snapshotTree = convertSummaryTreeToWholeSummaryTree(parentHandle, tree, \"\", type === \"channel\" ? \".app\" : \"\");\n      const snapshotPayload = {\n        entries: snapshotTree.entries,\n        message: undefined,\n        sequenceNumber,\n        type\n      };\n      return _this2.manager.createSummary(snapshotPayload).then(response => response.id);\n    })();\n  }\n\n} //# sourceMappingURL=wholeSummaryUploadManager.js.map","map":null,"metadata":{},"sourceType":"module"}