{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\sdeshpande\\\\Documents\\\\FluidExamples\\\\angular-demo\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\n\n/*!\n * Copyright (c) Microsoft Corporation and contributors. All rights reserved.\n * Licensed under the MIT License.\n */\nimport { ScopeType } from \"@fluidframework/protocol-definitions\";\nimport { getRandomName } from \"@fluidframework/server-services-client\";\nimport { KJUR as jsrsasign } from \"jsrsasign\";\nimport { v4 as uuid } from \"uuid\";\n/**\n * As the name implies this is not secure and should not be used in production. It simply makes the example easier\n * to get up and running.\n */\n\nexport class InsecureTinyliciousTokenProvider {\n  fetchOrdererToken(tenantId, documentId) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      return {\n        fromCache: true,\n        jwt: _this.getSignedToken(tenantId, documentId)\n      };\n    })();\n  }\n\n  fetchStorageToken(tenantId, documentId) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      return {\n        fromCache: true,\n        jwt: _this2.getSignedToken(tenantId, documentId)\n      };\n    })();\n  }\n\n  getSignedToken(tenantId, documentId, lifetime = 60 * 60, ver = \"1.0\") {\n    // Current time in seconds\n    const now = Math.round(new Date().getTime() / 1000);\n    const user = {\n      id: uuid(),\n      name: getRandomName()\n    };\n    const claims = {\n      documentId: documentId !== null && documentId !== void 0 ? documentId : \"\",\n      scopes: [ScopeType.DocRead, ScopeType.DocWrite, ScopeType.SummaryWrite],\n      tenantId,\n      user,\n      iat: now,\n      exp: now + lifetime,\n      ver\n    };\n    const utf8Key = {\n      utf8: \"12345\"\n    };\n    return jsrsasign.jws.JWS.sign(null, JSON.stringify({\n      alg: \"HS256\",\n      typ: \"JWT\"\n    }), claims, utf8Key);\n  }\n\n} //# sourceMappingURL=insecureTinyliciousTokenProvider.js.map","map":null,"metadata":{},"sourceType":"module"}